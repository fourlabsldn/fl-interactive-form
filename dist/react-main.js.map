{"version":3,"file":"react-main.js","sources":["src/js/utils/ie8-polyfills.js","src/js/utils/customEventsPolyfill.js","node_modules/fl-assert/dist/assert.js","src/js/utils/globals.js","src/js/react_helpers/ReactBEM.js","src/js/react_helpers/Error.js","src/js/form_fields/input_types/InputField.js","src/js/form_fields/input_types/text_inputs/TextInput.js","src/js/form_fields/input_types/text_inputs/TelephoneBox.js","src/js/form_fields/input_types/text_inputs/NumberBox.js","src/js/form_fields/input_types/text_inputs/EmailBox.js","src/js/form_fields/input_types/text_inputs/TextBox.js","src/js/form_fields/input_types/text_inputs/TextArea.js","src/js/form_fields/input_types/options_inputs/OptionsInput.js","src/js/form_fields/input_types/options_inputs/RadioButtons.js","src/js/form_fields/input_types/options_inputs/Checkboxes.js","src/js/form_fields/input_types/options_inputs/Dropdown.js","src/js/form_fields/FormField.js","src/js/form_structure/NavigationBar.js","src/js/utils/clone.js","src/js/utils/throttle.js","src/js/utils/isMobile.js","src/js/utils/requestAnimationFramePolyfill.js","src/js/utils/AnimationManager.js","src/js/utils/scrollSlide.js","src/js/form_fields/input_types/SubmitButton.js","src/js/form_structure/FormUI.js","src/js/form_structure/Form.js","src/js/react-main.js"],"sourcesContent":["/*! (C) WebReflection Mit Style License */\n(function(e){function w(e,t,n,r){for(var i,s,o=n.slice(),u=x(t,e),a=0,f=o.length;a<f;a++){i=o[a],typeof i==\"object\"?typeof i.handleEvent==\"function\"&&i.handleEvent(u):i.call(e,u);if(u.stoppedImmediatePropagation)break}return s=!u.stoppedPropagation,r&&s&&e.parentNode?e.parentNode.dispatchEvent(u):!u.defaultPrevented}function E(e,t){return{configurable:!0,get:e,set:t}}function S(e,t,n){var r=a(t||e,n);o(e,\"textContent\",E(function(){return r.get.call(this)},function(e){r.set.call(this,e)}))}function x(e,t){return e.currentTarget=t,e.eventPhase=e.target===e.currentTarget?2:3,e}function T(e,t){var n=e.length;while(n--&&e[n]!==t);return n}function N(){if(this.tagName===\"BR\")return\"\\n\";var e=this.firstChild,t=[];while(e)e.nodeType!==8&&e.nodeType!==7&&t.push(e.textContent),e=e.nextSibling;return t.join(\"\")}function C(e){return e.nodeType!==9&&m.contains(e)}function k(e){var t=document.createEvent(\"Event\");t.initEvent(\"input\",!0,!0),(e.srcElement||e.fromElement||document).dispatchEvent(t)}function L(e){!n&&p.test(document.readyState)&&(n=!n,document.detachEvent(r,L),e=document.createEvent(\"Event\"),e.initEvent(i,!0,!0),document.dispatchEvent(e))}function A(e){var t=e===\"X\"?\"Left\":\"Top\",n=\"client\"+e,r=\"client\"+t,i=\"scroll\"+t,s=\"_@\"+n;return function(){return this[s]||(this[s]=this[n]+(m[i]||document.body&&document.body[i]||0)-m[r])}}function O(e){var t;while(t=this.lastChild)this.removeChild(t);e!=null&&this.appendChild(document.createTextNode(e))}function M(t,n){return n||(n=e.event),n.target||(n.target=n.srcElement||n.fromElement||document),n.timeStamp||(n.timeStamp=(new Date).getTime()),n}if(document.createEvent)return;var t=!0,n=!1,r=\"onreadystatechange\",i=\"DOMContentLoaded\",s=\"__IE8__\"+Math.random(),o=Object.defineProperty||function(e,t,n){e[t]=n.value},u=Object.defineProperties||function(t,n){for(var r in n)if(f.call(n,r))try{o(t,r,n[r])}catch(i){e.console&&console.log(r+\" failed on object:\",t,i.message)}},a=Object.getOwnPropertyDescriptor,f=Object.prototype.hasOwnProperty,l=e.Element.prototype,c=e.Text.prototype,h=/^[a-z]+$/,p=/loaded|complete/,d={},v=document.createElement(\"div\"),m=document.documentElement,g=m.removeAttribute,y=m.setAttribute,b=function(e){return{enumerable:!0,writable:!0,configurable:!0,value:e}};S(e.HTMLCommentElement.prototype,l,\"nodeValue\"),S(e.HTMLScriptElement.prototype,null,\"text\"),S(c,null,\"nodeValue\"),S(e.HTMLTitleElement.prototype,null,\"text\"),o(e.HTMLStyleElement.prototype,\"textContent\",function(e){return E(function(){return e.get.call(this.styleSheet)},function(t){e.set.call(this.styleSheet,t)})}(a(e.CSSStyleSheet.prototype,\"cssText\"))),u(l,{textContent:{get:N,set:O},firstElementChild:{get:function(){for(var e=this.childNodes||[],t=0,n=e.length;t<n;t++)if(e[t].nodeType==1)return e[t]}},lastElementChild:{get:function(){for(var e=this.childNodes||[],t=e.length;t--;)if(e[t].nodeType==1)return e[t]}},oninput:{get:function(){return this._oninput||null},set:function(e){this._oninput&&(this.removeEventListener(\"input\",this._oninput),this._oninput=e,e&&this.addEventListener(\"input\",e))}},previousElementSibling:{get:function(){var e=this.previousSibling;while(e&&e.nodeType!=1)e=e.previousSibling;return e}},nextElementSibling:{get:function(){var e=this.nextSibling;while(e&&e.nodeType!=1)e=e.nextSibling;return e}},childElementCount:{get:function(){for(var e=0,t=this.childNodes||[],n=t.length;n--;e+=t[n].nodeType==1);return e}},addEventListener:b(function(e,t,n){if(typeof t!=\"function\"&&typeof t!=\"object\")return;var r=this,i=\"on\"+e,u=r[s]||o(r,s,{value:{}})[s],a=u[i]||(u[i]={}),l=a.h||(a.h=[]),c,p;if(!f.call(a,\"w\")){a.w=function(e){return e[s]||w(r,M(r,e),l,!1)};if(!f.call(d,i))if(h.test(e)){try{c=document.createEventObject(),c[s]=!0,r.nodeType!=9&&(r.parentNode==null&&v.appendChild(r),(p=r.getAttribute(i))&&g.call(r,i)),r.fireEvent(i,c),d[i]=!0}catch(m){d[i]=!1;while(v.hasChildNodes())v.removeChild(v.firstChild)}p!=null&&y.call(r,i,p)}else d[i]=!1;(a.n=d[i])&&r.attachEvent(i,a.w)}T(l,t)<0&&l[n?\"unshift\":\"push\"](t),e===\"input\"&&r.attachEvent(\"onkeyup\",k)}),dispatchEvent:b(function(e){var t=this,n=\"on\"+e.type,r=t[s],i=r&&r[n],o=!!i,u;return e.target||(e.target=t),o?i.n?t.fireEvent(n,e):w(t,e,i.h,!0):(u=t.parentNode)?u.dispatchEvent(e):!0,!e.defaultPrevented}),removeEventListener:b(function(e,t,n){if(typeof t!=\"function\"&&typeof t!=\"object\")return;var r=this,i=\"on\"+e,o=r[s],u=o&&o[i],a=u&&u.h,f=a?T(a,t):-1;-1<f&&a.splice(f,1)})}),u(c,{addEventListener:b(l.addEventListener),dispatchEvent:b(l.dispatchEvent),removeEventListener:b(l.removeEventListener)}),u(e.XMLHttpRequest.prototype,{addEventListener:b(function(e,t,n){var r=this,i=\"on\"+e,u=r[s]||o(r,s,{value:{}})[s],a=u[i]||(u[i]={}),f=a.h||(a.h=[]);T(f,t)<0&&(r[i]||(r[i]=function(){var t=document.createEvent(\"Event\");t.initEvent(e,!0,!0),r.dispatchEvent(t)}),f[n?\"unshift\":\"push\"](t))}),dispatchEvent:b(function(e){var t=this,n=\"on\"+e.type,r=t[s],i=r&&r[n],o=!!i;return o&&(i.n?t.fireEvent(n,e):w(t,e,i.h,!0))}),removeEventListener:b(l.removeEventListener)}),u(e.Event.prototype,{bubbles:b(!0),cancelable:b(!0),preventDefault:b(function(){this.cancelable&&(this.defaultPrevented=!0,this.returnValue=!1)}),stopPropagation:b(function(){this.stoppedPropagation=!0,this.cancelBubble=!0}),stopImmediatePropagation:b(function(){this.stoppedImmediatePropagation=!0,this.stopPropagation()}),initEvent:b(function(e,t,n){this.type=e,this.bubbles=!!t,this.cancelable=!!n,this.bubbles||this.stopPropagation()}),pageX:{get:A(\"X\")},pageY:{get:A(\"Y\")}}),u(e.HTMLDocument.prototype,{defaultView:{get:function(){return this.parentWindow}},textContent:{get:function(){return this.nodeType===11?N.call(this):null},set:function(e){this.nodeType===11&&O.call(this,e)}},addEventListener:b(function(n,s,o){var u=this;l.addEventListener.call(u,n,s,o),t&&n===i&&!p.test(u.readyState)&&(t=!1,u.attachEvent(r,L),e==top&&function a(e){try{u.documentElement.doScroll(\"left\"),L()}catch(t){setTimeout(a,50)}}())}),dispatchEvent:b(l.dispatchEvent),removeEventListener:b(l.removeEventListener),createEvent:b(function(e){var t;if(e!==\"Event\")throw new Error(\"unsupported \"+e);return t=document.createEventObject(),t.timeStamp=(new Date).getTime(),t})}),u(e.Window.prototype,{getComputedStyle:b(function(){function i(e){this._=e}function s(){}var e=/^(?:[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|))(?!px)[a-z%]+$/,t=/^(top|right|bottom|left)$/,n=/\\-([a-z])/g,r=function(e,t){return t.toUpperCase()};return i.prototype.getPropertyValue=function(i){var s=this._,o=s.style,u=s.currentStyle,a=s.runtimeStyle,f,l,c;return i=(i===\"float\"?\"style-float\":i).replace(n,r),f=u?u[i]:o[i],e.test(f)&&!t.test(i)&&(l=o.left,c=a&&a.left,c&&(a.left=u.left),o.left=i===\"fontSize\"?\"1em\":f,f=o.pixelLeft+\"px\",o.left=l,c&&(a.left=c)),f==null?f:f+\"\"||\"auto\"},s.prototype.getPropertyValue=function(){return null},function(e,t){return t?new s(e):new i(e)}}()),addEventListener:b(function(t,n,r){var i=e,o=\"on\"+t,u;i[o]||(i[o]=function(e){return w(i,M(i,e),u,!1)}),u=i[o][s]||(i[o][s]=[]),T(u,n)<0&&u[r?\"unshift\":\"push\"](n)}),dispatchEvent:b(function(t){var n=e[\"on\"+t.type];return n?n.call(e,t)!==!1&&!t.defaultPrevented:!0}),removeEventListener:b(function(t,n,r){var i=\"on\"+t,o=(e[i]||Object)[s],u=o?T(o,n):-1;-1<u&&o.splice(u,1)})}),function(e,t,n){for(n=0;n<t.length;n++)document.createElement(t[n]);e.length||document.createStyleSheet(\"\"),e[0].addRule(t.join(\",\"),\"display:block;\")}(document.styleSheets,[\"header\",\"nav\",\"section\",\"article\",\"aside\",\"footer\"])})(this.window||global);","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\nexport default (function () {\n  try {\n    new window.CustomEvent(\"test\");\n  } catch(e) {\n    var CustomEvent = function(event, params) {\n      var evt;\n      params = params || {\n        bubbles: false,\n        cancelable: false,\n        detail: undefined\n      };\n\n      evt = document.createEvent('Event');\n      evt.initEvent(event, params.bubbles, params.cancelable, params.detail);\n      evt.detail = params.detail;\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n}());\n","// Bug checking function that will throw an error whenever\n// the condition sent to it is evaluated to false\n/**\n * Processes the message and outputs the correct message if the condition\n * is false. Otherwise it outputs null.\n * @api private\n * @method processCondition\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return {String | null}  - Error message if there is an error, nul otherwise.\n */\nfunction processCondition(condition, errorMessage) {\n  if (!condition) {\n    var completeErrorMessage = '';\n    var re = /at ([^\\s]+)\\s\\(/g;\n    var stackTrace = new Error().stack;\n    var stackFunctions = [];\n\n    var funcName = re.exec(stackTrace);\n    while (funcName && funcName[1]) {\n      stackFunctions.push(funcName[1]);\n      funcName = re.exec(stackTrace);\n    }\n\n    // Number 0 is processCondition itself,\n    // Number 1 is assert,\n    // Number 2 is the caller function.\n    if (stackFunctions[2]) {\n      completeErrorMessage = stackFunctions[2] + ': ' + completeErrorMessage;\n    }\n\n    completeErrorMessage += errorMessage;\n    return completeErrorMessage;\n  }\n\n  return null;\n}\n\n/**\n * Throws an error if the boolean passed to it evaluates to false.\n * To be used like this:\n * \t\tassert(myDate !== undefined, \"Date cannot be undefined.\");\n * @api public\n * @method assert\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return void\n */\nfunction assert(condition, errorMessage) {\n  var error = processCondition(condition, errorMessage);\n  if (typeof error === 'string') {\n    throw new Error(error);\n  }\n}\n\n/**\n * Logs a warning if the boolean passed to it evaluates to false.\n * To be used like this:\n * \t\tassert.warn(myDate !== undefined, \"No date provided.\");\n * @api public\n * @method warn\n * @param  {Boolean} condition - Result of the evaluated condition\n * @param  {String} errorMessage - Message explainig the error in case it is thrown\n * @return void\n */\nassert.warn = function warn(condition, errorMessage) {\n  var error = processCondition(condition, errorMessage);\n  if (typeof error === 'string') {\n    console.warn(error);\n  }\n};\n\nexport default assert;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJhc3NlcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQnVnIGNoZWNraW5nIGZ1bmN0aW9uIHRoYXQgd2lsbCB0aHJvdyBhbiBlcnJvciB3aGVuZXZlclxuLy8gdGhlIGNvbmRpdGlvbiBzZW50IHRvIGl0IGlzIGV2YWx1YXRlZCB0byBmYWxzZVxuLyoqXG4gKiBQcm9jZXNzZXMgdGhlIG1lc3NhZ2UgYW5kIG91dHB1dHMgdGhlIGNvcnJlY3QgbWVzc2FnZSBpZiB0aGUgY29uZGl0aW9uXG4gKiBpcyBmYWxzZS4gT3RoZXJ3aXNlIGl0IG91dHB1dHMgbnVsbC5cbiAqIEBhcGkgcHJpdmF0ZVxuICogQG1ldGhvZCBwcm9jZXNzQ29uZGl0aW9uXG4gKiBAcGFyYW0gIHtCb29sZWFufSBjb25kaXRpb24gLSBSZXN1bHQgb2YgdGhlIGV2YWx1YXRlZCBjb25kaXRpb25cbiAqIEBwYXJhbSAge1N0cmluZ30gZXJyb3JNZXNzYWdlIC0gTWVzc2FnZSBleHBsYWluaWcgdGhlIGVycm9yIGluIGNhc2UgaXQgaXMgdGhyb3duXG4gKiBAcmV0dXJuIHtTdHJpbmcgfCBudWxsfSAgLSBFcnJvciBtZXNzYWdlIGlmIHRoZXJlIGlzIGFuIGVycm9yLCBudWwgb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBwcm9jZXNzQ29uZGl0aW9uKGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKSB7XG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgbGV0IGNvbXBsZXRlRXJyb3JNZXNzYWdlID0gJyc7XG4gICAgY29uc3QgcmUgPSAvYXQgKFteXFxzXSspXFxzXFwoL2c7XG4gICAgY29uc3Qgc3RhY2tUcmFjZSA9IG5ldyBFcnJvcigpLnN0YWNrO1xuICAgIGNvbnN0IHN0YWNrRnVuY3Rpb25zID0gW107XG5cbiAgICBsZXQgZnVuY05hbWUgPSByZS5leGVjKHN0YWNrVHJhY2UpO1xuICAgIHdoaWxlIChmdW5jTmFtZSAmJiBmdW5jTmFtZVsxXSkge1xuICAgICAgc3RhY2tGdW5jdGlvbnMucHVzaChmdW5jTmFtZVsxXSk7XG4gICAgICBmdW5jTmFtZSA9IHJlLmV4ZWMoc3RhY2tUcmFjZSk7XG4gICAgfVxuXG4gICAgLy8gTnVtYmVyIDAgaXMgcHJvY2Vzc0NvbmRpdGlvbiBpdHNlbGYsXG4gICAgLy8gTnVtYmVyIDEgaXMgYXNzZXJ0LFxuICAgIC8vIE51bWJlciAyIGlzIHRoZSBjYWxsZXIgZnVuY3Rpb24uXG4gICAgaWYgKHN0YWNrRnVuY3Rpb25zWzJdKSB7XG4gICAgICBjb21wbGV0ZUVycm9yTWVzc2FnZSA9IGAke3N0YWNrRnVuY3Rpb25zWzJdfTogJHtjb21wbGV0ZUVycm9yTWVzc2FnZX1gO1xuICAgIH1cblxuICAgIGNvbXBsZXRlRXJyb3JNZXNzYWdlICs9IGVycm9yTWVzc2FnZTtcbiAgICByZXR1cm4gY29tcGxldGVFcnJvck1lc3NhZ2U7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGJvb2xlYW4gcGFzc2VkIHRvIGl0IGV2YWx1YXRlcyB0byBmYWxzZS5cbiAqIFRvIGJlIHVzZWQgbGlrZSB0aGlzOlxuICogXHRcdGFzc2VydChteURhdGUgIT09IHVuZGVmaW5lZCwgXCJEYXRlIGNhbm5vdCBiZSB1bmRlZmluZWQuXCIpO1xuICogQGFwaSBwdWJsaWNcbiAqIEBtZXRob2QgYXNzZXJ0XG4gKiBAcGFyYW0gIHtCb29sZWFufSBjb25kaXRpb24gLSBSZXN1bHQgb2YgdGhlIGV2YWx1YXRlZCBjb25kaXRpb25cbiAqIEBwYXJhbSAge1N0cmluZ30gZXJyb3JNZXNzYWdlIC0gTWVzc2FnZSBleHBsYWluaWcgdGhlIGVycm9yIGluIGNhc2UgaXQgaXMgdGhyb3duXG4gKiBAcmV0dXJuIHZvaWRcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKSB7XG4gIGNvbnN0IGVycm9yID0gcHJvY2Vzc0NvbmRpdGlvbihjb25kaXRpb24sIGVycm9yTWVzc2FnZSk7XG4gIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIExvZ3MgYSB3YXJuaW5nIGlmIHRoZSBib29sZWFuIHBhc3NlZCB0byBpdCBldmFsdWF0ZXMgdG8gZmFsc2UuXG4gKiBUbyBiZSB1c2VkIGxpa2UgdGhpczpcbiAqIFx0XHRhc3NlcnQud2FybihteURhdGUgIT09IHVuZGVmaW5lZCwgXCJObyBkYXRlIHByb3ZpZGVkLlwiKTtcbiAqIEBhcGkgcHVibGljXG4gKiBAbWV0aG9kIHdhcm5cbiAqIEBwYXJhbSAge0Jvb2xlYW59IGNvbmRpdGlvbiAtIFJlc3VsdCBvZiB0aGUgZXZhbHVhdGVkIGNvbmRpdGlvblxuICogQHBhcmFtICB7U3RyaW5nfSBlcnJvck1lc3NhZ2UgLSBNZXNzYWdlIGV4cGxhaW5pZyB0aGUgZXJyb3IgaW4gY2FzZSBpdCBpcyB0aHJvd25cbiAqIEByZXR1cm4gdm9pZFxuICovXG5hc3NlcnQud2FybiA9IGZ1bmN0aW9uIHdhcm4oY29uZGl0aW9uLCBlcnJvck1lc3NhZ2UpIHtcbiAgY29uc3QgZXJyb3IgPSBwcm9jZXNzQ29uZGl0aW9uKGNvbmRpdGlvbiwgZXJyb3JNZXNzYWdlKTtcbiAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3NlcnQ7XG4iXSwiZmlsZSI6ImFzc2VydC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9\n","export default {\n  modulePrefix: 'fl-if', // Interactive form\n  FOCUS_CLASS: 'fl-if_focusMe',\n};\n","import React from 'react';\nimport globals from '../utils/globals';\n\n/**\n * This class automatically calculate element classes and\n * adds it to this.bemClass property.\n * If the element is supposed to be created as a descendant of another\n * component, it should be created with <MyReactBEM cssPrefix={this.bemClass} />\n * @abstract @class ReactBEM\n */\nclass ReactBEM extends React.Component {\n  constructor(props, ...args) {\n    super(props, ...args);\n    if (props.cssPrefix) {\n      this.bemClass = `${props.cssPrefix}-${lowerCaseFirstLetter(this.constructor.name)}`;\n    } else {\n      this.bemClass = `${globals.modulePrefix}_${this.constructor.name}`;\n    }\n\n    this.modulePrefix = globals.modulePrefix;\n    this.bemState = this.bemState.bind(this);\n    this.bemSubComponent = this.bemSubComponent.bind(this);\n  }\n\n  bemState(state) {\n    return `${this.bemClass}--${state}`;\n  }\n\n  bemSubComponent(...componentTree) {\n    let className = `${this.bemClass}`;\n    for (const componentName of componentTree) {\n      className += `-${componentName}`;\n    }\n    return className;\n  }\n\n  bemSubComponentState(...args) {\n    const state = args.pop();\n    const subComponentClass = this.bemSubComponent(args);\n    const subComponentState = `${subComponentClass}--${state}`;\n    return subComponentState;\n  }\n}\n\nfunction lowerCaseFirstLetter(word) {\n  if (word && word.charAt(0)) {\n    const wordHead = word.charAt(0).toLowerCase();\n    const wordTail = word.slice(1);\n    return wordHead + wordTail;\n  }\n  return '';\n}\n\nReactBEM.propTypes = {\n  cssPrefix: React.PropTypes.string,\n};\n\nexport default ReactBEM;\n","import React from 'react';\nimport ReactBEM from './ReactBEM';\n\nexport default class Error extends ReactBEM {\n\n  render() {\n    const classes = [this.bemClass];\n    if (this.props.speechBubble) {\n      classes.push(this.bemState('speechBubble'));\n    }\n\n    return <div className={classes.join(' ')}> {this.props.children} </div>;\n  }\n}\n","import React from 'react';\nimport ReactBEM from '../../react_helpers/ReactBEM';\n\nexport default class InputField extends ReactBEM {\n  constructor(...args) {\n    super(...args);\n    this.keyListener = this.keyListener.bind(this);\n    this.getResponse = this.getResponse.bind(this);\n    this.validateResponse = this.validateResponse.bind(this);\n    this.saveResponse = this.saveResponse.bind(this);\n    this.saveResponseAndJumpToQuestion = this.saveResponseAndJumpToQuestion.bind(this);\n    this.isRequired = this.isRequired.bind(this);\n    this.keyPrev = this.keyPrev.bind(this);\n    this.keyNext = this.keyNext.bind(this);\n    this.keySelect = this.keySelect.bind(this);\n  }\n\n  /**\n   * Saves question response and animates to the next\n   * field according to the validation outcome.\n   * @method saveResponseAndJumpToQuestion\n   * @param  {String} jumpDirection\n   * @return {Promise}\n   */\n  async saveResponseAndJumpToQuestion(response, jumpDirection = 'next') {\n    const previouslyCompletedState = this.props.ui.completed;\n    await this.saveResponse(response);\n\n    // We will not move to the next question if there is an error.\n    const err = this.validateResponse(response);\n    if (err) { return; }\n\n    // Now there will be a render pass and this element will be set to completed\n    // we wait for the animation to finish before going to the next question.\n    let animDuration = 0;\n    if (!previouslyCompletedState && this.props.ui.completed) {\n      animDuration = 500;\n    }\n\n    setTimeout(() => this.props.appControl.goToField(jumpDirection), animDuration);\n  }\n\n\n  // To be overriden by subclasses\n  getResponse() {\n    return this.props.config.answer;\n  }\n\n  /**\n   * @private\n   * @method isRequired\n   * @return {Boolean}\n   */\n  isRequired() {\n    return this.props.config.required;\n  }\n\n  /**\n   * @private\n   * @method validateResponse\n   * @param  {Array | String | Int} response\n   * @return {String} Returns an error message, if there is an error.\n   * If there is no error it returns a falsy value.\n   */\n  validateResponse(response = this.getResponse()) {\n    if (this.isRequired() && !response) {\n      return 'Field must be filled.';\n    }\n    return null;\n  }\n\n  /**\n   * Saves the response and sets the field as completed. No animation\n   * @method saveResponse\n   * @param  {Int | String | Array} response\n   * @return {Promise}\n   */\n  async saveResponse(response = this.getResponse()) {\n    this.props.appControl.setQuestionResponse(\n      this.props.config.key,\n      response\n    );\n\n    // Show error if there is any\n    const err = this.validateResponse(response);\n    await this.showError(err);\n\n    await this.props.appControl.setQuestionCompleted(\n      this.props.config.key,\n      !err\n    );\n  }\n\n  keyListener(e) { // eslint-disable-line complexity\n    const up = 38;\n    const down = 40;\n    const tab = 9;\n    const enter = 13;\n\n    if (e.ctrlKey) { return; }\n    if (e.shiftKey && e.keyCode !== tab) { return; }\n    if (e.keyCode === enter) {\n      this.keySelect();\n    } else if (e.keyCode === up) {\n      this.keyPrev();\n    } else if (e.keyCode === down) {\n      this.keyNext();\n    } else if (e.keyCode === tab && e.shiftKey) {\n      this.keyPrev();\n    } else if (e.keyCode === tab) {\n      this.keyNext();\n    } else {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  keyPrev() {\n    const response = this.getResponse();\n    this.saveResponseAndJumpToQuestion(response, 'prev');\n  }\n\n  keyNext() {\n    const response = this.getResponse();\n    this.saveResponseAndJumpToQuestion(response, 'next');\n  }\n\n  keySelect() {\n    this.keyNext();\n  }\n\n  async showError(message) {\n    return await this.props.appControl.setFieldError(this.props.config.key, message);\n  }\n}\n\nInputField.PropTypes = {\n  ui: React.PropTypes.object.isRequired,\n  config: React.PropTypes.object.isRequired,\n  appControl: React.PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport InputField from '../InputField';\nimport globals from '../../../utils/globals';\n\n/**\n * @abstract @class\n */\nexport default class TextInput extends InputField {\n  constructor(...args) {\n    super(...args);\n    this.render = this.render.bind(this);\n    this.inputEl = null; // To be set by subclasses\n\n    // Make sure we just trigger a revalidarion on blur when there has been\n    // some change.\n    this.changedSinceLastUpdate = false;\n\n    /** @override */\n    this.bemClass = `${this.modulePrefix}_TextInput`;\n  }\n\n  getResponse() {\n    const response = ReactDOM.findDOMNode(this.refs.input).value;\n    return response.trim();\n  }\n\n  /**\n   * @override\n   */\n  validateResponse(response = this.getResponse()) {\n    if (this.isRequired() && !response) {\n      return 'This field must be completed.';\n    }\n\n    return false;\n  }\n\n  render() {\n    const InputEl = this.inputEl;\n    const handleInputChange = () => {\n      this.changedSinceLastUpdate = true;\n      if (this.props.ui.active) {\n        // set incomplete\n        this.props.appControl.setQuestionCompleted(this.props.config.key, false);\n      }\n\n      if (this.props.ui.error) {\n        this.showError(this.validateResponse());\n      }\n    };\n\n    const handleBlur = () => {\n      if (!this.changedSinceLastUpdate) { return; }\n      this.changedSinceLastUpdate = false;\n      this.saveResponse();\n    };\n\n    return (\n      <div className={this.bemClass}>\n        <InputEl\n          className={`${this.bemSubComponent('input')} ${this.className} ${globals.FOCUS_CLASS}`}\n          ref=\"input\"\n          type={this.type}\n          defaultValue={this.props.config.answer}\n          placeholder={this.props.config.placeholder}\n\n          onKeyDown={this.keyListener}\n          onChange={handleInputChange}\n          onBlur={handleBlur}\n          disabled={!this.props.ui.active}\n        />\n      </ div>\n    );\n  }\n}\n","import TextInput from './TextInput';\nconst telRegex = /^\\+?[0-9|\\-|\\s]{5,15}$/;\nexport default class NumberBox extends TextInput {\n  /**\n   * @override\n   */\n  validateResponse(response = this.getResponse()) {\n    if (!this.isRequired() && !response) {\n      return false;\n    }\n\n    if (this.isRequired() && !response) {\n      return 'This field must be completed';\n    }\n\n    if (!telRegex.test(response)) {\n      return 'Please insert a valid telephone number';\n    }\n\n    return false;\n  }\n\n  constructor(...args) {\n    super(...args);\n    this.inputEl = 'input';\n    this.type = 'tel';\n  }\n}\n","import TextInput from './TextInput';\nconst numberRegex = /^[0-9]+$/;\nexport default class NumberBox extends TextInput {\n  /**\n   * @override\n   */\n  validateResponse(response = this.getResponse()) {\n    if (!this.isRequired() && !response) {\n      return false;\n    }\n\n    if (this.isRequired() && !response) {\n      return 'This field must be completed'\n    }\n\n    if (!numberRegex.test(response)) {\n      return 'Invalid response. Please only insert number characters.';\n    }\n\n    return false;\n  }\n\n  constructor(...args) {\n    super(...args);\n    this.inputEl = 'input';\n    this.type = 'email';\n  }\n}\n","import TextInput from './TextInput';\n\n/* RFC822 regex. see http://badsyntax.co/post/javascript-email-validation-rfc822 */\nconst emailRegex = /^([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22))*\\x40([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d))*$/;\n\nexport default class EmailBox extends TextInput {\n  /**\n   * @override\n   */\n  validateResponse(response = this.getResponse()) {\n    if (!this.isRequired() && !response) {\n      return false;\n    }\n\n    if (this.isRequired() && !response) {\n      return 'This field must be completed';\n    }\n\n    if (!emailRegex.test(response)) {\n      return 'Invalid email address.';\n    }\n\n    return false;\n  }\n\n  constructor(...args) {\n    super(...args);\n    this.inputEl = 'input';\n    this.type = 'email';\n  }\n}\n","import TextInput from './TextInput';\n\nexport default class TextBox extends TextInput {\n  constructor(...args) {\n    super(...args);\n    this.inputEl = 'input';\n    this.type = 'text';\n  }\n}\n","import TextInput from './TextInput';\n\nexport default class TextArea extends TextInput {\n  constructor(...args) {\n    super(...args);\n    this.inputEl = 'textarea';\n    // TODO: How to use this.bemSubComponent() corecctly?\n    this.className = 'fl-if_TextAreaInput-input';\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport InputField from '../InputField';\nimport globals from '../../../utils/globals';\n\nexport default class OptionsInput extends InputField {\n  constructor(...args) {\n    super(...args);\n    this.render = this.render.bind(this);\n    this.generateOptions = this.generateOptions.bind(this);\n\n    /** @override */\n    this.bemClass = `${this.modulePrefix}_OptionsInput`;\n  }\n\n  keyPrev() {\n    const container = ReactDOM.findDOMNode(this);\n    const options = Array.from(container.querySelectorAll(`.${globals.FOCUS_CLASS}`));\n    const focusedIndex = options.findIndex(p => p === document.activeElement);\n\n    if (options[focusedIndex - 1]) {\n      this.props.appControl.focus(options[focusedIndex - 1]);\n    } else {\n      super.keyPrev();\n    }\n  }\n\n  keyNext() {\n    const container = ReactDOM.findDOMNode(this);\n    const options = Array.from(container.querySelectorAll(`.${globals.FOCUS_CLASS}`));\n    const focusedIndex = options.findIndex(p => p === document.activeElement);\n\n    if (options[focusedIndex + 1]) {\n      this.props.appControl.focus(options[focusedIndex + 1]);\n    } else {\n      super.keyNext();\n    }\n  }\n\n  keySelect() {\n    const container = ReactDOM.findDOMNode(this);\n    const options = Array.from(container.querySelectorAll(`.${globals.FOCUS_CLASS}`));\n    const focusedIndex = options.findIndex(p => p === document.activeElement);\n\n    if (options[focusedIndex]) {\n      options[focusedIndex].click();\n    } else {\n      super.keySelect();\n    }\n  }\n\n  /**\n   * To be overriden by subclasses\n   * @method generateOptions\n   * @param  {Array} optionsArray\n   * @return {Array<ReactElement>}\n   */\n  generateOptions(options) {\n    throw new Error('Should be implemented by subclass');\n  }\n\n  render() {\n    const options = this.generateOptions(this.props.config.options);\n\n    return (\n      <div\n        className={this.bemClass}\n        onKeyDown={this.keyListener}\n      >\n        {options}\n      </ div>\n    );\n  }\n}\n","import React from 'react';\nimport OptionsInput from './OptionsInput';\nimport globals from '../../../utils/globals';\n\nexport default class RadioButtons extends OptionsInput {\n  /**\n   * @method getResponse\n   * @return {Int} Response index\n   */\n  getResponse() {\n    // Even though radio buttons only have one response, all option\n    // input elements hold their responses in an array.\n    const anwerArray = this.props.config.answer;\n    return anwerArray ? anwerArray[0] : undefined;\n  }\n\n  validateResponse(response) {\n    if (\n      !this.isRequired() ||\n      this.props.config.options[response] !== undefined\n    ) {\n      return null;\n    }\n    return 'You must choose at lease one option';\n  }\n\n  generateOptions(options) {\n    return options.map((option, index) => {\n      const optionClasses = [\n        this.bemSubComponent('option'),\n        this.bemSubComponent('radio'),\n        globals.FOCUS_CLASS,\n      ];\n\n      const response = this.getResponse();\n      if (index === response) {\n        optionClasses.push(this.bemSubComponentState('option', 'selected'));\n      }\n\n      return (\n        <div\n          className={optionClasses.join(' ')}\n          key={`${this.props.config.key}${index}`}\n          onClick={() => this.saveResponseAndJumpToQuestion([index], 'next')}\n          tabIndex=\"0\"\n        >\n          {option}\n        </div>\n      );\n    });\n  }\n}\n","import React from 'react';\nimport OptionsInput from './OptionsInput';\nimport globals from '../../../utils/globals';\nimport assert from 'fl-assert';\n\nexport default class Checkboxes extends OptionsInput {\n  constructor(...args) {\n    super(...args);\n    this.checkboxClick = this.checkboxClick.bind(this);\n  }\n\n  /**\n   * @override\n   * @method getResponse\n   * @return {Array<Boolean>} Each index corresponds to an option index\n   * selection value.\n   */\n  getResponse() {\n    if (Array.isArray(this.props.config.answer)) {\n      return Array.from(this.props.config.answer);\n    }\n\n    // Return array of same size as options but all elements as false\n    return this.props.config.options.map(() => false);\n  }\n\n  /**\n   * @override\n   * @method validateResponse\n   * @param  {Array<Bool>} response\n   * @return {String} - Error message.\n   */\n  validateResponse(response = this.getResponse()) {\n    if (!this.isRequired()) { return null; }\n    if (!Array.isArray(response)) {\n      return 'This field must be filled';\n    }\n\n    assert(response.length === this.props.config.options.length,\n      `Invalid response array. Response of length ${response.length}\n       and options with length ${this.props.config.options.length}`);\n\n       // All values are boolean\n    assert(\n      response.reduce((valid, r) => valid && typeof r === 'boolean', true),\n      'Response array has non-boolean values'\n    );\n\n    // If it is required, it must contain at least on checked opiton;\n    const checkedOptionCount = response.filter(r => !!r).length;\n\n    if (checkedOptionCount === 0) {\n      return 'You must check at least one option.';\n    }\n\n    return null;\n  }\n\n  /**\n   * @private\n   * @method checkboxClick\n   * @param  {Int} index - clicked option index\n   * @return {void}\n   */\n  checkboxClick(index) {\n    const selectedOptions = this.getResponse();\n    // Toggle selection\n    selectedOptions[index] = !selectedOptions[index];\n    this.saveResponse(selectedOptions);\n  }\n\n  /**\n   * @override\n   * @method generateOptions\n   * @param  {Array<String>} options\n   * @return {Array<ReactDOMElements}\n   */\n  generateOptions(options) {\n    const responses = this.getResponse();\n    return options.map((option, index) => {\n      const optionClasses = [\n        this.bemSubComponent('option'),\n        this.bemSubComponent('checkbox'),\n        globals.FOCUS_CLASS,\n      ];\n\n      if (responses[index]) {\n        optionClasses.push(this.bemSubComponentState('option', 'selected'));\n      }\n\n      return (\n        <div\n          className={optionClasses.join(' ')}\n          key={`${this.props.config.key}${index}`}\n          onClick={() => this.checkboxClick(index)}\n          tabIndex=\"0\"\n        >\n          {option}\n        </div>\n      );\n    });\n  }\n}\n","import React from 'react';\nimport OptionsInput from './OptionsInput';\nimport globals from '../../../utils/globals';\n\nexport default class Dropdown extends OptionsInput {\n  constructor(...args) {\n    super(...args);\n\n    this.onChange = this.onChange.bind(this);\n    /** @override */\n    this.bemClass = `${this.bemClass} fl-if_Dropdown`;\n  }\n\n  /**\n   * @override\n   * @method validateResponse\n   * @param  {Array<Bool>} response\n   * @return {String} - Error message.\n   */\n  validateResponse(response = this.getResponse()) {\n    if (this.isRequired() && !response) {\n      return 'Please choose an option';\n    }\n\n    return false;\n  }\n\n  onChange() {\n    const selectedOption = this.refs.selectionBox.selectedIndex;\n    this.saveResponseAndJumpToQuestion(selectedOption, 'next');\n  }\n\n\n  /**\n   * @override\n   * @method generateOptions\n   * @param  {Array<String>} options\n   * @return {Array<ReactDOMElements}\n   */\n  generateOptions(options) {\n    const disabledIndexes = this.props.config.disabledIndexes || [];\n    const optionEls = options.map((option, index) => {\n      const disabled = disabledIndexes.includes(index);\n      return (\n        <option\n          key={`${this.props.config.key}${index}`}\n          tabIndex=\"0\"\n          disabled={disabled}\n        >\n          {option}\n        </option>\n      );\n    });\n\n    const classes = [\n      this.bemSubComponent('option'),\n      globals.FOCUS_CLASS,\n    ].join(' ');\n\n    const additionalProps = {};\n\n    // If no answer was given, let's force the first option as selected\n    // because it might be a placeholder, which is set to disabled and would\n    // normally not be selected.\n    const currResponse = this.getResponse();\n    if (currResponse === null || currResponse === undefined) {\n      additionalProps.value = 0;\n    }\n\n    return (\n      <select\n        className={classes}\n        onChange={this.onChange}\n        ref=\"selectionBox\"\n        {...additionalProps}\n      >\n        {optionEls}\n      </ select>\n    );\n  }\n}\n","import React from 'react';\nimport ReactBEM from '../react_helpers/ReactBEM';\nimport Error from '../react_helpers/Error';\nimport TelephoneBox from './input_types/text_inputs/TelephoneBox';\nimport NumberBox from './input_types/text_inputs/NumberBox';\nimport EmailBox from './input_types/text_inputs/EmailBox';\nimport TextBox from './input_types/text_inputs/TextBox';\nimport TextArea from './input_types/text_inputs/TextArea';\nimport RadioButtons from './input_types/options_inputs/RadioButtons';\nimport Checkboxes from './input_types/options_inputs/Checkboxes';\nimport Dropdown from './input_types/options_inputs/Dropdown';\n\nconst inputTypes = {\n  TextBox,\n  TextArea,\n  RadioButtons,\n  Checkboxes,\n  Dropdown,\n  EmailBox,\n  NumberBox,\n  TelephoneBox,\n};\n\n\nexport default class FormField extends ReactBEM {\n  constructor(...args) {\n    super(...args);\n    this.handleClick = this.handleClick.bind(this);\n    this.validate = this.validate.bind(this);\n  }\n\n  handleClick() {\n    if (!this.props.ui.active) {\n      this.props.appControl.setFieldActive(this.props.config.key);\n    }\n  }\n\n  /**\n   * Shows error and returns error message\n   * @method validate\n   * @return {String} Error message\n   */\n  async validate() {\n    const response = this.refs.input.getResponse();\n    const error = this.refs.input.validateResponse(response);\n    if (error) {\n      await this.refs.input.showError(error);\n    }\n    return error;\n  }\n\n  render() {\n    // assert(\n    //   typeof inputTypes[this.props.config.type] !== 'undefined',\n    //   `Invalid input type: ${this.props.config.type}`\n    // );\n\n    const classNames = [this.bemClass];\n    if (this.props.ui.active) {\n      classNames.push(this.bemState('active'));\n    }\n    if (this.props.ui.completed) {\n      classNames.push(this.bemState('completed'));\n    }\n\n    const inputProps = {\n      ui: this.props.ui,\n      config: this.props.config,\n      appControl: this.props.appControl,\n      key: this.props.config.key,\n      ref: 'input',\n    };\n\n    const errorMsg = this.props.ui.error;\n    const error = errorMsg\n      ? <Error speechBubble> {errorMsg} </ Error>\n      : null;\n\n\n    // We want to support new custom elements\n    const reactElement = inputTypes[this.props.config.type] ||\n                         inputTypes[this.props.config.primitiveType];\n\n    return (\n      <div className={classNames.join(' ')} onClick={this.handleClick}>\n\n        <p className={this.bemSubComponent('legend')}>\n          <i className={`fa fa-check-circle ${this.bemSubComponent('okIcon')}`} />\n          {this.props.config.title}\n        </p>\n\n        {React.createElement(reactElement, inputProps)}\n\n        {error}\n\n      </div>\n    );\n  }\n}\n\nFormField.PropTypes = {\n  ui: React.PropTypes.object.isRequired,\n  config: React.PropTypes.object.isRequired,\n  appControl: React.PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport ReactBEM from '../react_helpers/ReactBEM';\n\nexport default class NavigationBar extends ReactBEM {\n\n  render() {\n    const completed = this.props.ui.questions.reduce(\n      (sum, q) => { return q.completed ? sum + 1 : sum; },\n      0\n    );\n\n    const activeQuestionIndex = this.props.ui.questions.findIndex(q => q.active);\n    const inactiveStyle = { pointerEvents: 'none', opacity: .5 };\n    const prevBtnStyle = activeQuestionIndex === 0 ? inactiveStyle : {};\n    const nextBtnStyle = activeQuestionIndex === -1 ? inactiveStyle : {};\n\n\n    const percentageCompleted = Math.floor(completed * 100 / this.props.ui.questions.length);\n\n    const btnClick = (e, nextPrev) => {\n      // Prevent button click from dismissing the keyboard on phones.\n      e.preventDefault();\n      e.stopPropagation();\n      this.props.appControl.goToField(nextPrev);\n    };\n\n    return (\n      <div className={this.bemClass}>\n\n        <div className={this.bemSubComponent('progress')}>\n          <div className={this.bemSubComponent('progress', 'percentage')}>\n            {percentageCompleted}% complete\n          </div>\n\n          <div className={this.bemSubComponent('progress', 'bar')}>\n            <div\n              className={this.bemSubComponent('progress', 'bar', 'fill')}\n              style={{ width: `${percentageCompleted}%` }}\n            />\n          </div>\n        </div>\n\n        <div className={this.bemSubComponent('buttons')}>\n          <button\n            className={this.bemSubComponent('button')}\n            onClick={e => btnClick(e, 'prev')}\n            style={prevBtnStyle}\n          >\n            Prev\n          </button>\n\n          <button\n            className={this.bemSubComponent('button')}\n            onClick={e => btnClick(e, 'next')}\n            style={nextBtnStyle}\n          >\n            Next\n          </button>\n        </div>\n\n      </div>\n    );\n  }\n}\n\nNavigationBar.PropTypes = {\n  appControl: React.PropTypes.object.isRequired,\n  ui: React.PropTypes.object.isRequired,\n};\n","export default (a) => JSON.parse(JSON.stringify(a));\n","\n/**\n * @public\n * @method throttle\n * @param  {Function} fn\n * @param  {Int} threshhold - Number of milliseconds\n * @param  {Object} scope - this object\n * @param  {Boolean} defer - whether to execute the callback after the delay has finished\n * @return {Function}\n */\nexport default function throttle(fn, threshhold = 250, scope, defer = true) {\n  let last;\n  let deferTimer;\n  return (...args) => {\n    const context = scope || this;\n\n    const now = +new Date;\n    if (last && now < last + threshhold) {\n      // hold on to it\n      clearTimeout(deferTimer);\n\n      if (defer) {\n        deferTimer = setTimeout(() => {\n          last = now;\n          fn.apply(context, args);\n        }, threshhold);\n      }\n    } else {\n      last = now;\n      fn.apply(context, args);\n    }\n  };\n}\n","export default function mobileCheck() {\n  var check = false;\n  (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);\n  return check;\n}\n","// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n\n// requestAnimationFrame polyfill by Erik MÃ¶ller. fixes from Paul Irish and Tino Zijdel\n\n// MIT license\n\n(function() {\n    var lastTime = 0;\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame']\n                                   || window[vendors[x]+'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame)\n        window.requestAnimationFrame = function(callback, element) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n              timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n\n    if (!window.cancelAnimationFrame)\n        window.cancelAnimationFrame = function(id) {\n            clearTimeout(id);\n        };\n}());\n\nexport default true;\n","import './requestAnimationFramePolyfill';\n/**\n * Handled calling requestAnimationFrame and makes it easy to perform an\n * animation a reduced amount of frames per second by jumping frames.\n * @class AnimationManager\n */\nclass AnimationManager {\n  constructor() {\n    this.animations = {};\n  }\n\n  /**\n   * Cancels a scheduled animation frame\n   * @public\n   * @method cancel\n   * @param  {String} animationName Animation name set with scheduleAnimation\n   * @return {void}\n   */\n  cancel(animationName) {\n    cancelAnimationFrame(this.animations[animationName]);\n  }\n\n  /**\n   * Will call animationFunction after a frameDelay amount of frames.\n   * @public\n   * @method schedule\n   * @param  {Function} animationFunction\n   * @param  {String} animationName - Optional, but you need one if you want to\n   * be able to cancel it afterwards\n   * @param  {Int} frameDelay - Optional. animationFunction will be called\n   * immediately if it is not provided.\n   * @return {void}\n   */\n  schedule(animationFunction, animationName = Math.random().toString(), frameDelay = 0) {\n    this.cancel(animationName);\n    if (frameDelay > 0) {\n      this.animations[animationName] = requestAnimationFrame(\n        () => this.schedule(animationFunction, animationName, frameDelay - 1)\n      );\n    } else {\n      this.animations[animationName] = requestAnimationFrame(animationFunction);\n    }\n  }\n}\n\nexport default AnimationManager;\n","/* eslint-disable no-param-reassign */\n\nimport AnimationManager from './AnimationManager';\nconst animations = new AnimationManager();\n\n/**\n * @public\n * @method scrollSlide\n * @param  {HTMLElement} container - Element whose scroll position will be changed\n * @param  {Int} targetScroll - Target scroll position;\n * @param  {Int} duration - Duration in milliseconds\n * @return {Promise} - To be fulfilled when transition ends\n */\nexport default function scrollSlide(container, targetScroll, duration = 500) {\n  const initialScroll = container.scrollTop;\n  const scrollDistance = targetScroll - initialScroll;\n\n  // fps * duration / millisecondsPerSecond\n  const totalFrames = 60 * duration / 1000;\n\n  let f = 0; // frame number\n\n  const doSliding = (callback) => {\n    // scroll progress percentage from 0 to 1\n    const p = f / totalFrames;\n\n    // ease-in-out formula\n    const displacementPercentage = p < 0.5 ? 2 * p * p : -1 + (4 - 2 * p) * p;\n\n    const displacement = scrollDistance * displacementPercentage;\n    container.scrollTop = initialScroll + displacement;\n\n    f += 1;\n\n    if (f < totalFrames) {\n      animations.schedule(() => doSliding(callback), 'scrollSlide', 0);\n    } else {\n      callback();\n    }\n  };\n\n\n  return new Promise((resolve, reject) => {\n    let resolved = false;\n    doSliding(() => { resolved = true; resolve(); });\n\n    // In case another scroll comes up and any 'doSliding' callback is cancelled\n    // we will make sure to reject the promise and not leave it hanging\n    function rejectIfNotResolved() {\n      if (!resolved) { reject('Animation frame cancelled'); }\n    }\n\n    setTimeout(rejectIfNotResolved, 1.5 * duration);\n  });\n}\n","import React from 'react';\nimport Error from '../../react_helpers/Error';\nimport InputField from './InputField';\nimport globals from '../../utils/globals';\n\nexport default class SubmitButton extends InputField {\n  constructor(...args) {\n    super(...args);\n    this.saveResponse = () => null;\n    this.getResponse = () => null;\n    this.onClick = this.onClick.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.initialState = {\n      error: '',\n      text: 'Submit',\n    };\n\n    this.state = this.initialState;\n  }\n\n  async onClick() {\n    // If there is already an error being shown.\n    if (this.state.error) {\n      this.props.appControl.slideToFirstWithError();\n      return;\n    }\n\n    const errorFields = await this.props.validateAllFields();\n    if (errorFields.length > 0) {\n      this.setState({\n        error: `${errorFields.length} answer${errorFields.length > 1 ? 's' : ''} need completing`,\n        text: 'Review',\n      });\n    } else {\n      this.props.appControl.triggerSubmit();\n    }\n  }\n\n  keySelect() {\n    this.onClick();\n  }\n\n  keyPrev() {\n    this.props.appControl.goToField('prev');\n  }\n\n  keyNext() {\n    return;\n  }\n\n  onBlur() {\n    this.setState(this.initialState);\n  }\n\n  render() {\n    const buttonClass = this.props.ui.active\n      ? `${this.bemClass} ${this.bemState('active')}`\n      : `${this.bemClass}`;\n\n    const error = this.state.error\n      ? <Error>{this.state.error}</Error>\n      : null;\n\n    return (\n      <div\n        className={buttonClass}\n        onKeyDown={this.keyListener}\n      >\n\n        {error}\n\n        <button\n          className={`${this.bemSubComponent('button')} ${globals.FOCUS_CLASS}`}\n          ref=\"button\"\n          onClick={this.onClick}\n          onBlur={this.onBlur}\n          tabIndex=\"0\"\n        >\n          {this.state.text}\n        </button>\n      </div>\n    );\n  }\n}\n\nSubmitButton.PropTypes = {\n  appControl: React.PropTypes.object.isRequired,\n  ui: React.PropTypes.object.isRequired,\n  validateAllFields: React.PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport ReactBEM from '../react_helpers/ReactBEM';\nimport FormField from '../form_fields/FormField';\nimport NavigationBar from './NavigationBar';\n\nimport clone from '../utils/clone';\nimport globals from '../utils/globals';\nimport throttle from '../utils/throttle';\nimport isMobile from '../utils/isMobile';\nimport scrollSlide from '../utils/scrollSlide';\nimport AnimationManager from '../utils/AnimationManager';\nimport SubmitButton from '../form_fields/input_types/SubmitButton';\nimport assert from 'fl-assert';\n\nconst IS_TOUCH_DEVICE = isMobile();\n// Takes care of the UI part of things.\nexport default class FormUI extends ReactBEM {\n  constructor(...args) {\n    super(...args);\n\n    // private\n    this.onWheel = this.onWheel.bind(this);\n    this.onScroll = throttle(this.onScroll.bind(this), 250, this, true);\n    this.touchEnd = this.touchEnd.bind(this);\n    this.touchMove = this.touchMove.bind(this);\n    this.touchStart = this.touchStart.bind(this);\n    this.getFieldNode = this.getFieldNode.bind(this);\n    this.getFormFields = this.getFormFields.bind(this);\n    this.validateAllFields = this.validateAllFields.bind(this);\n    this.setFieldActive = this.setFieldActive.bind(this);\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.getActiveFieldKey = this.getActiveFieldKey.bind(this);\n    this.slideFieldToCenter = this.slideFieldToCenter.bind(this);\n    this.slideToFirstWithError = this.slideToFirstWithError.bind(this);\n    this.processTouchDisplacement = this.processTouchDisplacement.bind(this);\n    this.triggerSubmit = this.triggerSubmit.bind(this);\n\n    // public\n    this.focus = this.focus.bind(this);\n    this.goToField = throttle(this.goToField.bind(this), 250, this, false);\n    this.setFieldError = this.setFieldError.bind(this);\n    this.setQuestionCompleted = this.setQuestionCompleted.bind(this);\n\n    // instance globals\n    this.initialTouchY = null;\n    this.animatingScroll = false;\n    this.animations = new AnimationManager();\n\n    this.appControl = Object.assign(this.props.appControl, {\n      focus: this.focus,\n      goToField: this.goToField,\n      setQuestionCompleted: this.setQuestionCompleted,\n      setFieldActive: this.setFieldActive,\n      setFieldError: this.setFieldError,\n      triggerSubmit: this.triggerSubmit,\n      slideToFirstWithError: this.slideToFirstWithError,\n    });\n\n    this.state = this.generateInitialState(this.props.config);\n  }\n\n  /**\n   * Processes a config object from this.props and returns it.\n   * @private\n   * @method importConfig\n   * @return {Object}\n   */\n  generateInitialState() {\n    const createUiObj = (objKey) => {\n      return { key: objKey, active: false, complete: false };\n    };\n\n    // Create a ui object to control questions\n    const ui = {};\n    ui.submitButton = createUiObj('submit');\n    ui.questions = this.props.config.map(q => createUiObj(q.key));\n    return { ui };\n  }\n\n  /**\n   * Called once when the component is created.\n   * @private\n   * @method componentDidMount\n   * @return {void}\n   */\n  componentDidMount() {\n    // Make first question active.\n    this.animations.schedule(() => this.goToField('next'), '', 30);\n\n\n    const centerActiveQuestion = () => {\n      const active = this.getActiveFieldKey();\n      this.slideFieldToCenter(active);\n    };\n\n    window.addEventListener(\n      'resize',\n      () => this.animations.schedule(centerActiveQuestion, 'formResize', 20)\n    );\n  }\n\n  /**\n   * Returns an array containing all form questions and the submit button.\n   * @method getFormFields\n   * @return {Array}\n   */\n  getFormFields() {\n    const formFields = [\n      ... this.state.ui.questions,\n      this.state.ui.submitButton,\n    ];\n    return formFields;\n  }\n\n  /**\n   * @private\n   * @return {String}\n   */\n  getActiveFieldKey() {\n    const formFields = this.getFormFields();\n    const active = formFields.find(f => f.active === true);\n    return active ? active.key : undefined;\n  }\n\n  /**\n   * @private\n   * @method getFieldNode\n   * @param  {String} key\n   * @return {HTMLElement}\n   */\n  getFieldNode(key) {\n    return ReactDOM.findDOMNode(this.refs[key]);\n  }\n\n  /**\n   * element.focus() but with some extras\n   * Focuses and prevent viewBox from scrolling\n   * @public\n   * @method focus\n   * @param  {HTMLElement} element\n   * @return {void}\n   */\n  focus(element) {\n    if (!element) { return; }\n    const currScrollPosition = this.refs.questionsViewBox.scrollTop;\n    const focus = () => {\n      element.focus();\n      this.refs.questionsViewBox.scrollTop = currScrollPosition;\n    };\n\n    setTimeout(focus, 10);\n  }\n\n\n  /**\n   * @public\n   * Moves the focus to the next or previous question by\n   * setting it as active and moving it to the center of the viewport.\n   * @method goToField\n   * @param  {String} prevNext\n   * @return {void}\n   */\n  async goToField(prevNext) {\n    const next = prevNext === 'next';\n    const formFields = this.getFormFields();\n    const activeKey = this.getActiveFieldKey();\n    const activeIndex = formFields.findIndex(f => f.key === activeKey);\n    const changedIndex = activeIndex + (next ? +1 : -1);\n    const newActiveIndex = Math.max(0, Math.min(formFields.length - 1, changedIndex));\n    const newActiveKey = formFields[newActiveIndex].key;\n    this.setFieldActive(newActiveKey);\n\n    await this.slideFieldToCenter(newActiveKey);\n    const node = this.getFieldNode(newActiveKey);\n    const focusEl = node.querySelector(`.${globals.FOCUS_CLASS}`);\n\n    // On mobile devices we don't focus on input elements because\n    // the keyboard keeps changing the screen width, which can be quite annoying.\n    const moduleJustLoaded = activeKey === undefined;\n    if (moduleJustLoaded || (IS_TOUCH_DEVICE && focusEl.nodeName === 'INPUT')) {\n      return;\n    }\n    this.focus(focusEl);\n  }\n\n  /**\n   * @private\n   */\n  async slideFieldToCenter(key) {\n    this.animatingScroll = true;\n    const node = this.getFieldNode(key);\n    assert(node, `No field found with key: ${key}`);\n    const viewBox = this.refs.questionsViewBox;\n\n    const viewBoxheight = viewBox.clientHeight;\n    const distanceFromTop = Math.max(0, (viewBoxheight - node.clientHeight) / 2);\n\n    const targetScroll = node.offsetTop - distanceFromTop;\n    const animationDuration = 160;\n\n    try {\n      await scrollSlide(viewBox, targetScroll, animationDuration);\n      const focusEl = node.querySelector(`.${globals.FOCUS_CLASS}`);\n      if (focusEl) {\n        // this.focus(focusEl);\n      }\n    } catch (e) {\n      // nothing\n    } finally {\n      this.animatingScroll = false;\n    }\n  }\n\n  /**\n   * Used by submit button. Shows error and returns arror ammount\n   * @public\n   * @method validateAllFields\n   * @return {Array<String>}  Object with keys of fields with error\n   */\n  async validateAllFields() {\n    const errorFields = [];\n\n    for (const q of this.props.config) {\n      const questionReactEl = this.refs[q.key];\n      const err = await questionReactEl.validate();\n      if (err) {\n        errorFields.push(q.key);\n      }\n    }\n\n    return errorFields;\n  }\n\n\n  /**\n   * @method slideToFirstWithError\n   * @return {Promise}\n   */\n  async slideToFirstWithError() {\n    const errorFields = await this.validateAllFields();\n    if (errorFields.length > 0) {\n      this.setFieldActive(errorFields[0]);\n      this.slideFieldToCenter(errorFields[0]);\n    }\n  }\n\n  triggerSubmit() {\n    const formElement = ReactDOM.findDOMNode(this);\n    const submitEvent = new CustomEvent('submit', {\n      detail: { answers: this.props.config },\n      bubbles: true,\n      cancelable: true,\n    });\n    formElement.dispatchEvent(submitEvent);\n  }\n\n  // ==============================================================\n  //                     STATE HANDLERS\n  // ==============================================================\n\n  /**\n   * Sets a question as completed.\n   * @private\n   * @method setQuestionCompleted\n   * @param  {String} questionKey\n   * @param  {Boolean} completed\n   * @return {Promise}\n   */\n  setQuestionCompleted(questionKey, completed) {\n    const qIndex = this.state.ui.questions.findIndex(q => q.key === questionKey);\n    assert(qIndex !== -1, `Did not find question with key: ${questionKey}`);\n\n    const ui = clone(this.state.ui);\n    ui.questions[qIndex].completed = !!completed;\n\n    return new Promise(resolve => this.setState({ ui }, resolve));\n  }\n\n  /**\n   * @private\n   * @method setFieldActive\n   * @param  {String} index\n   */\n  setFieldActive(key) {\n    assert(this.refs[key], `Invalid key: ${key}`);\n    const ui = clone(this.state.ui);\n\n    // set everyone not active\n    ui.submitButton.active = false;\n    for (const q of ui.questions) {\n      q.active = false;\n    }\n\n    if (key === ui.submitButton.key) {\n      ui.submitButton.active = true;\n    } else {\n      const questionIndex = ui.questions.findIndex(q => q.key === key);\n      assert(questionIndex !== -1, `Invalid question index ${questionIndex}`);\n      ui.questions[questionIndex].active = true;\n    }\n\n    this.setState({ ui });\n  }\n\n  async setFieldError(key, message) {\n    assert(this.refs[key], `Invalid key: ${key}`);\n    const ui = clone(this.state.ui);\n    const field = ui.questions.find(q => q.key === key);\n    field.error = message;\n\n    await new Promise(resolve => this.setState({ ui }, resolve));\n  }\n\n  // ==============================================================\n  //                     EVENT HANDLERS\n  // ==============================================================\n  /**\n   * Scroll envent on questionsViewBox\n   * @param  {Event} e\n   */\n  onScroll() {\n    if (this.animatingScroll) {\n      return;\n    }\n\n    const formFields = this.getFormFields();\n    const formNodes = formFields.map(f => this.getFieldNode(f.key));\n    const viewBoxHeight = this.refs.questionsViewBox.clientHeight;\n    const viewBoxScroll = this.refs.questionsViewBox.scrollTop;\n    const viewBoxCenter = viewBoxScroll + viewBoxHeight / 2;\n\n    function distanceFromCenter(element) {\n      const elementCenter = element.clientHeight / 2 + element.offsetTop;\n      const elementDistance = viewBoxCenter - elementCenter;\n      const distance = Math.abs(elementDistance);\n      return distance;\n    }\n\n    let smallestDistance = distanceFromCenter(formNodes[0]);\n    const indexOfCenterNode = formNodes.reduce((closestIdx, node, nodeIdx) => {\n      const nodeDistance = distanceFromCenter(formNodes[nodeIdx]);\n      const closestNodeIndex = nodeDistance < smallestDistance ? nodeIdx : closestIdx;\n      smallestDistance = nodeDistance < smallestDistance ? nodeDistance : smallestDistance;\n      return closestNodeIndex;\n    }, 0);\n\n    const closestKey = formFields[indexOfCenterNode].key;\n    this.setFieldActive(closestKey);\n  }\n\n  /**\n   * Wheel envent on questionsViewBox\n   * @param  {Event} e\n   */\n  onWheel(e) {\n    e.preventDefault();\n\n    // Let's dismiss moves that are too small. They come from things like\n    // Apple's scroll innertia, which can mess things up. We want to move\n    // just one question per scroll if possible.\n    if (!e.deltaY || Math.abs(e.deltaY) < 2) {\n      return;\n    }\n\n    // Throttle the second part to a minimum of 500 milliseconds\n    if ((new Date() - this.lastWheelMove) < 350) {\n      return;\n    }\n    this.lastWheelMove = new Date();\n\n    const wheelDelta = e.deltaY;\n    this.animations.schedule(() => {\n      if (wheelDelta > 0) {\n        this.goToField('next');\n      } else if (wheelDelta < 0) {\n        this.goToField('prev');\n      }\n    }, 'scroll', 0);\n  }\n\n  /**\n   * Touch envent on questionsViewBox\n   * @param  {Event} e\n   */\n  touchStart(e) {\n    this.initialTouchY = e.changedTouches[0].pageY;\n    this.lastMoveY = this.initialTouchY;\n    this.lastMoveTime = new Date();\n    this.lastMoveScrollValue = this.refs.questionsViewBox.scrollTop;\n    this.currY = this.lastMoveY;\n    this.animatingScroll = true;\n    this.processTouchDisplacement();\n  }\n\n  /**\n   * Touch envent on questionsViewBox\n   * @param  {Event} e\n   */\n  touchMove(e) {\n    e.preventDefault();\n    // Track Y\n    this.currY = e.changedTouches[0].pageY;\n  }\n\n  /**\n   * Touch envent on questionsViewBox\n   * @param  {Event} e\n   */\n  touchEnd() {\n    this.animations.cancel('touchScroll');\n  }\n\n  /**\n   * @param  {Event} e\n   * @return {void}\n   */\n  processTouchDisplacement() {\n    const maxTouchSpeed = 0.9; // px/ms\n    const maxTotalDisplacement = 130;\n\n    const displacement = this.lastMoveY - this.currY;\n    const currTime = new Date;\n    // Make sure we never divide by 0\n    const timeElapsed = Math.max(1, currTime - this.lastMoveTime);\n    const touchSpeed = displacement / timeElapsed;\n    this.lastMoveY = this.currY;\n    this.lastMoveTime = new Date();\n\n    const totalDisplacement = Math.abs(this.initialTouchY - this.currY);\n    if (Math.abs(touchSpeed) < maxTouchSpeed && totalDisplacement < maxTotalDisplacement) {\n      const newScrollValue = this.lastMoveScrollValue + displacement;\n      this.lastMoveScrollValue = newScrollValue;\n      this.refs.questionsViewBox.scrollTop = newScrollValue;\n      this.animations.schedule(this.processTouchDisplacement, 'touchScroll', 0);\n      return;\n    }\n\n    this.animations.cancel('touchScroll');\n    this.animatingScroll = false;\n\n    if (displacement > 0) {\n      this.goToField('next');\n    } else {\n      this.goToField('prev');\n    }\n  }\n\n  render() {\n    const questions = this.props.config.map((q, index) => {\n      return (\n        <FormField\n          config={q}\n          ui={this.state.ui.questions[index]}\n          appControl={this.appControl}\n          key={q.key}\n          ref={q.key}\n        />);\n    });\n\n\n    return (\n      <div className={this.bemClass}>\n        <div\n          className={this.bemSubComponent('questionsViewBox')}\n          ref=\"questionsViewBox\"\n          onTouchStart={this.touchStart}\n          onTouchEnd={this.touchEnd}\n          onTouchMove={this.touchMove}\n          onWheel={this.onWheel}\n          onScroll={this.onScroll}\n        >\n          <div className={this.bemSubComponent('questions')} ref=\"questions\" >\n            {questions}\n\n            <SubmitButton\n              ui={this.state.ui.submitButton}\n              appControl={this.appControl}\n              ref={this.state.ui.submitButton.key}\n              validateAllFields={this.validateAllFields}\n            />\n          </div>\n        </div>\n\n        <NavigationBar appControl={this.appControl} ui={this.state.ui} />\n      </div>\n    );\n  }\n}\n\nFormUI.PropTypes = {\n  config: React.PropTypes.object.isRequired,\n  appControl: React.PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport assert from 'fl-assert';\nimport FormUI from './FormUI';\nimport ReactBEM from '../react_helpers/ReactBEM';\nimport clone from '../utils/clone';\n\n// The form will receive a config object which will describe the form fields.\n// The form config contains an array of questions. The UI state object will\n// mirror this questions array but will have the UI attributes for each form\n// component.\n\n// Config example:\nconst exampleConfig = [{\n  question: 'What is your name?',\n  placeholder: 'My name is...',\n  type: 'Text',\n}];\n\nexport default class Form extends ReactBEM {\n  constructor(...args) {\n    super(...args);\n\n    // private\n    this.generateInitialState = this.generateInitialState.bind(this);\n    this.exportConfig = this.exportConfig.bind(this);\n\n    // public\n    this.setQuestionResponse = this.setQuestionResponse.bind(this);\n\n    this.state = this.generateInitialState(this.props.config);\n  }\n\n  /**\n   * Processes a config object from this.props and returns it.\n   * @private\n   * @pure\n   * @method importConfig\n   * @param {Object} initialConfig - A configuration received as props.\n   * Possibly an object created by fl-form-build\n   * @param {Array<Object>} customComponents\n   * @return {Object}\n   */\n  generateInitialState(initialConfig, customComponents = []) {\n    const config = initialConfig\n      .map(q => {\n        const customConstructor = customComponents.find(c => c.type === q.type);\n        return customConstructor\n          ? customConstructor.initialState(q)\n          : q;\n      })\n      .map(q => Object.assign({}, q, {\n        answer: null,\n        key: String(Date.now() + Math.random()),\n      }));\n\n    return { config };\n  }\n\n  exportConfig() {\n    console.log(this.state);\n    // To be implemented\n  }\n\n  /**\n   * @public\n   * @method setQuestionResponse\n   * @param  {String} questionKey\n   * @param  {} answerValue\n   * @return Promise - will be resolved after the status is updated.\n   */\n  setQuestionResponse(questionKey, answerValue) {\n    const qIndex = this.state.config.findIndex(q => q.key === questionKey);\n    assert(qIndex !== -1, `Did not find question with key: ${questionKey}`);\n\n    const newConfig = clone(this.state.config);\n    newConfig[qIndex].answer = answerValue;\n\n    return new Promise(resolve => this.setState({ config: newConfig }, resolve));\n  }\n\n  render() {\n    const appControl = {\n      setQuestionResponse: this.setQuestionResponse,\n      exportConfig: this.exportConfig,\n    };\n\n    return <FormUI config={this.state.config} appControl={appControl} />;\n  }\n}\n\nForm.PropTypes = {\n  config: React.PropTypes.object.isRequired,\n  customComponents: React.PropTypes.array,\n};\n","/* globals xController */\n// import 'babel-polyfill'; // Removing to avoid conflict in squarespace\nimport './utils/ie8-polyfills';\nimport './utils/customEventsPolyfill';\nimport ReactDOM from 'react-dom';\nimport React from 'react';\nimport assert from 'fl-assert';\nimport Form from './form_structure/Form';\n\nconst flInteractiveForm = {\n  create: (config, customComponents) => {\n    assert(config && config.length !== undefined,\n      'The first argument must be a configuration array');\n\n    const targetElement = document.createElement('div');\n    targetElement.className = 'fl-if';\n    ReactDOM.render(<Form config={config} customComponents={customComponents} />, targetElement);\n\n    return targetElement;\n  },\n};\n\nexport default flInteractiveForm;\n"],"names":["e","w","t","n","r","i","s","o","slice","u","x","a","f","length","handleEvent","call","stoppedImmediatePropagation","stoppedPropagation","parentNode","dispatchEvent","defaultPrevented","E","configurable","get","set","S","currentTarget","eventPhase","target","T","N","tagName","firstChild","nodeType","push","textContent","nextSibling","join","C","m","contains","k","document","createEvent","initEvent","srcElement","fromElement","L","p","test","readyState","detachEvent","A","body","O","lastChild","removeChild","appendChild","createTextNode","M","event","timeStamp","Date","getTime","Math","random","Object","defineProperty","value","defineProperties","console","log","message","getOwnPropertyDescriptor","prototype","hasOwnProperty","l","Element","c","Text","h","d","v","createElement","documentElement","g","removeAttribute","y","setAttribute","b","enumerable","writable","HTMLCommentElement","HTMLScriptElement","HTMLTitleElement","HTMLStyleElement","styleSheet","CSSStyleSheet","firstElementChild","childNodes","lastElementChild","oninput","_oninput","removeEventListener","addEventListener","previousElementSibling","previousSibling","nextElementSibling","childElementCount","createEventObject","getAttribute","fireEvent","hasChildNodes","attachEvent","type","splice","XMLHttpRequest","Event","bubbles","cancelable","preventDefault","returnValue","stopPropagation","cancelBubble","stopImmediatePropagation","pageX","pageY","HTMLDocument","defaultView","parentWindow","top","doScroll","Error","Window","getComputedStyle","_","toUpperCase","getPropertyValue","style","currentStyle","runtimeStyle","replace","left","pixelLeft","createStyleSheet","addRule","styleSheets","this","window","commonjsHelpers","CustomEvent","params","evt","undefined","detail","ReactBEM","React","Component","props","args","cssPrefix","bemClass","lowerCaseFirstLetter","constructor","name","globals","modulePrefix","bemState","bind","bemSubComponent","state","componentTree","className","componentName","pop","subComponentClass","subComponentState","word","charAt","wordHead","toLowerCase","wordTail","propTypes","PropTypes","string","classes","speechBubble","children","InputField","keyListener","getResponse","validateResponse","saveResponse","saveResponseAndJumpToQuestion","isRequired","keyPrev","keyNext","keySelect","response","jumpDirection","previouslyCompletedState","ui","completed","err","animDuration","appControl","goToField","config","answer","required","setQuestionResponse","key","showError","setQuestionCompleted","up","down","tab","enter","ctrlKey","shiftKey","keyCode","setFieldError","object","TextInput","render","inputEl","changedSinceLastUpdate","ReactDOM","findDOMNode","refs","input","trim","InputEl","handleInputChange","active","error","handleBlur","FOCUS_CLASS","placeholder","telRegex","NumberBox","numberRegex","emailRegex","EmailBox","TextBox","TextArea","OptionsInput","generateOptions","container","options","Array","from","querySelectorAll","focusedIndex","findIndex","activeElement","focus","click","RadioButtons","anwerArray","map","option","index","optionClasses","bemSubComponentState","Checkboxes","checkboxClick","isArray","reduce","valid","checkedOptionCount","filter","selectedOptions","responses","Dropdown","onChange","selectedOption","selectionBox","selectedIndex","disabledIndexes","optionEls","disabled","includes","additionalProps","currResponse","inputTypes","FormField","handleClick","validate","setFieldActive","classNames","inputProps","errorMsg","reactElement","primitiveType","title","NavigationBar","questions","sum","q","activeQuestionIndex","inactiveStyle","pointerEvents","opacity","prevBtnStyle","nextBtnStyle","percentageCompleted","floor","btnClick","nextPrev","width","JSON","parse","stringify","throttle","fn","threshhold","scope","defer","last","deferTimer","context","now","setTimeout","apply","mobileCheck","check","substr","navigator","userAgent","vendor","opera","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","callback","element","currTime","timeToCall","max","id","AnimationManager","animations","animationName","animationFunction","toString","frameDelay","cancel","schedule","scrollSlide","targetScroll","duration","initialScroll","scrollTop","scrollDistance","totalFrames","doSliding","displacementPercentage","displacement","Promise","resolve","reject","resolved","rejectIfNotResolved","SubmitButton","onClick","onBlur","initialState","slideToFirstWithError","errorFields","validateAllFields","setState","triggerSubmit","buttonClass","text","func","IS_TOUCH_DEVICE","isMobile","FormUI","onWheel","onScroll","touchEnd","touchMove","touchStart","getFieldNode","getFormFields","componentDidMount","getActiveFieldKey","slideFieldToCenter","processTouchDisplacement","initialTouchY","animatingScroll","assign","generateInitialState","createUiObj","objKey","complete","submitButton","centerActiveQuestion","formFields","find","currScrollPosition","questionsViewBox","prevNext","next","activeKey","activeIndex","changedIndex","newActiveIndex","min","newActiveKey","node","focusEl","querySelector","moduleJustLoaded","nodeName","viewBox","viewBoxheight","clientHeight","distanceFromTop","offsetTop","animationDuration","questionReactEl","formElement","submitEvent","answers","questionKey","qIndex","clone","questionIndex","field","formNodes","viewBoxHeight","viewBoxScroll","viewBoxCenter","distanceFromCenter","elementCenter","elementDistance","distance","abs","smallestDistance","indexOfCenterNode","closestIdx","nodeIdx","nodeDistance","closestNodeIndex","closestKey","deltaY","lastWheelMove","wheelDelta","changedTouches","lastMoveY","lastMoveTime","lastMoveScrollValue","currY","maxTouchSpeed","maxTotalDisplacement","timeElapsed","touchSpeed","totalDisplacement","newScrollValue","Form","exportConfig","initialConfig","customComponents","customConstructor","String","answerValue","newConfig","array","flInteractiveForm","targetElement"],"mappings":"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"}